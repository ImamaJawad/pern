{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Imama Jawad\\\\Desktop\\\\projects\\\\pern\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Imama Jawad\\\\Desktop\\\\projects\\\\pern\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Imama Jawad\\\\Desktop\\\\projects\\\\pern\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import EditTodo from\"./EditTodos.js\";var ListTodos=function ListTodos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];//delete todo function\nfunction deleteTodo(_x){return _deleteTodo.apply(this,arguments);}function _deleteTodo(){_deleteTodo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/todos/\".concat(id),{method:\"DELETE\"});case 3:res=_context.sent;setTodos(todos.filter(function(todo){return todo.todo_id!==id;}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _deleteTodo.apply(this,arguments);}function getTodos(){return _getTodos.apply(this,arguments);}function _getTodos(){_getTodos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,todoArray;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/todos\");case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:todoArray=_context2.sent;setTodos(todoArray);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _getTodos.apply(this,arguments);}useEffect(function(){getTodos();},[]);console.log(todos);return/*#__PURE__*/React.createElement(Fragment,null,\" \",/*#__PURE__*/React.createElement(\"table\",{class:\"table mt-5\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Description\"),/*#__PURE__*/React.createElement(\"th\",null,\"Edit\"),/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,todos.map(function(todo){return/*#__PURE__*/React.createElement(\"tr\",{key:todo.todo_id},/*#__PURE__*/React.createElement(\"td\",null,todo.description),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(EditTodo,{todo:todo})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.todo_id);}},\"Delete\")));}))));};export default ListTodos;","map":{"version":3,"sources":["C:/Users/Imama Jawad/Desktop/projects/pern/client/src/components/ListTodos.js"],"names":["React","Fragment","useState","useEffect","EditTodo","ListTodos","todos","setTodos","deleteTodo","id","fetch","method","res","filter","todo","todo_id","console","error","message","getTodos","json","todoArray","log","map","description"],"mappings":"shBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,KAAqD,OAArD,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,eACIH,QAAQ,CAAC,EAAD,CADZ,wCACfI,KADe,eACRC,QADQ,eAGtB;AAHsB,QAKPC,CAAAA,UALO,0IAKtB,iBAA0BC,EAA1B,gKAEsBC,CAAAA,KAAK,uCAAgCD,EAAhC,EAAsC,CAC3DE,MAAM,CAAE,QADmD,CAAtC,CAF3B,QAEUC,GAFV,eAMIL,QAAQ,CAACD,KAAK,CAACO,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,OAAL,GAAiBN,EAArB,EAAjB,CAAD,CAAR,CANJ,+EAQIO,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EARJ,oEALsB,qDAiBPC,CAAAA,QAjBO,kIAiBtB,iLACoBT,CAAAA,KAAK,CAAC,6BAAD,CADzB,QACQE,GADR,uCAG0BA,CAAAA,GAAG,CAACQ,IAAJ,EAH1B,QAGQC,SAHR,gBAKEd,QAAQ,CAACc,SAAD,CAAR,CALF,wDAjBsB,2CAyBtBlB,SAAS,CAAC,UAAM,CACdgB,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIAH,OAAO,CAACM,GAAR,CAAYhB,KAAZ,EAEA,mBACE,oBAAC,QAAD,MACG,GADH,cAEE,6BAAO,KAAK,CAAC,YAAb,eACE,8CACE,2CACE,4CADF,cAEE,qCAFF,cAGE,uCAHF,CADF,CADF,cAQE,iCAOGA,KAAK,CAACiB,GAAN,CAAU,SAAAT,IAAI,qBACb,0BAAI,GAAG,CAAEA,IAAI,CAACC,OAAd,eACE,8BAAKD,IAAI,CAACU,WAAV,CADF,cAEE,2CACE,oBAAC,QAAD,EAAU,IAAI,CAAEV,IAAhB,EADF,CAFF,cAKE,2CACE,8BACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE,yBAAMN,CAAAA,UAAU,CAACM,IAAI,CAACC,OAAN,CAAhB,EAFX,WADF,CALF,CADa,EAAd,CAPH,CARF,CAFF,CADF,CAsCD,CArED,CAuEA,cAAeV,CAAAA,SAAf","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\nimport EditTodo from \"./EditTodos.js\";\r\n\r\nconst ListTodos = () => {\r\n  const [todos, setTodos] = useState([]);\r\n\r\n  //delete todo function\r\n\r\n  async function deleteTodo(id) {\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/todos/${id}`, {\r\n        method: \"DELETE\"\r\n      });\r\n\r\n      setTodos(todos.filter(todo => todo.todo_id !== id));\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  }\r\n\r\n  async function getTodos() {\r\n    const res = await fetch(\"http://localhost:5000/todos\");\r\n\r\n    const todoArray = await res.json();\r\n\r\n    setTodos(todoArray);\r\n  }\r\n\r\n  useEffect(() => {\r\n    getTodos();\r\n  }, []);\r\n\r\n  console.log(todos);\r\n\r\n  return (\r\n    <Fragment>\r\n      {\" \"}\r\n      <table class=\"table mt-5\">\r\n        <thead>\r\n          <tr>\r\n            <th>Description</th>\r\n            <th>Edit</th>\r\n            <th>Delete</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {/*<tr>\r\n            <td>John</td>\r\n            <td>Doe</td>\r\n            <td>john@example.com</td>\r\n          </tr> */}\r\n\r\n          {todos.map(todo => (\r\n            <tr key={todo.todo_id}>\r\n              <td>{todo.description}</td>\r\n              <td>\r\n                <EditTodo todo={todo} />\r\n              </td>\r\n              <td>\r\n                <button\r\n                  className=\"btn btn-danger\"\r\n                  onClick={() => deleteTodo(todo.todo_id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ListTodos;"]},"metadata":{},"sourceType":"module"}